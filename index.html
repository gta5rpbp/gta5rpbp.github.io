<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>GTA 5 RP | Bonus Points</title>
	<link rel="shortcut icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsSAAALEgHS3X78AAAAG3RFWHRTb2Z0d2FyZQBDZWxzeXMgU3R1ZGlvIFRvb2zBp+F8AAADIUlEQVR4nO2Z0X3TMBCHv07QboCZIGWChgkIE1AmIDz3gfCgZ8IEmA3CBIQJiCbAbGAmKA/ntKl8UhRHjptE/9/PD7Gl0/mTdTpdLu7v7zlnXWQAGUAGMLQPgyoDyAAygAxgaB8GVQaQAbgA7kY3e9irMPbvXh7djUbA1Y69Vhj7r8twGoAUn0QNLIEFsNjJubvRT2DccdxVcy1jx+0LwKZqYIaxX6Na7wfAHXcOzEMgDgFgrSUw2Tor6QCsVTfj/tIeHhIAwBJjXwdbpAew1i3GfndvxgKYImsrpKK5JsD1ro5sjK8BKJtL01Uz3nXTLxRAx+6XEAug1TEoieQlOogVxr4K9NUAzDD2c+TY75C1r4GogWJzGfYDQOxcApXqiLEXgX77AXgce4k+AU9s9QdAbH1Blk+8vRQAxM4LZNm6E1Bh7Mv1j74B3CAzEW8vFQCx5ZuAa4y1cPoAfOM/BOKhAFx584GUAMSe9j4P9voG8AmYOXf73QXa9gYF8Jt2JO6SBxwhANmPS+duePalX8oYMEJP4CYY+wP6ACB78JT2p183duyW/ikBaJMAHXaBmFR4nY5O0PZeoR5+eRk/JYA/SHr+1JcOecA+KoFpdE0gXSL0AUmJXXXKBLuqapwoDwrA/+l3Pguk0Bx5kS71gDgAkv7OgFtPi6lbmDl0PaBiWyzY/Tg8RmLOmPAxvMTY9+7NlEGQxoECCYSFp02NRGG9eNpPQUR9eeg3D7hBZq1QnvorQ+kBtD77TfWdCV4iECbKUz0jTAegRGJHsEzfLwCx5yuMLDD2rdK+K4B1KX7Z2I76f6J/AGLzG1pk1ipDuwfBOirB8uhQALampBtt0x6GtuhQAOILIxnAaQJ4g/xP6OpsloBenIwPgkcMQLbBFe2ESC+OnCAAfQvcLRE6QgAy83P0l6+Q9d8+GR49ADmSTpA1X3haPdTklP7PEkCJzJpPhXOFNMfYj96nzxRAKgVPZs34JwmgQoLe9mV0YgAqxHn/HyGujhhAjez3j8fSLqe0wQGcmTKADCADyACG9mFQZQAZQAaQAQztw6A6ewD/ATVovp83eW6XAAAAAElFTkSuQmCC" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
	<style>
		.show-button {
			margin-top: -0.3em;
			opacity: 0.8;
			font-size: 0.8rem;
			padding-right: 0.5em !important;
			transition: opacity 0.2s ease-in-out;
		}

		.show-button:hover {
			opacity: 1;
		}

		.hide-button {
			margin-top: -0.5em;
			opacity: 0.5;
			transition: opacity 0.2s ease-in-out;
		}

		.hide-button:hover {
			opacity: 1;
		}

		.theme-toggle-btn {
			width: 36px;
			height: 36px;
			font-size: 1.3rem;
			line-height: 1;
			opacity: 0.7;
			transition: all 0.2s ease-in-out;
		}

		.theme-toggle-btn:hover:not(:active) {
			opacity: 1;
			box-shadow: 0 0 5px rgba(255,255,255,0.2);
		}
	</style>
</head>
<body class="bg-light">
<div class="position-absolute top-0 end-0 m-3 z-3">
	<button id="toggle-theme" class="btn btn-sm rounded-circle d-flex align-items-center justify-content-center theme-toggle-btn" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
		üåì
	</button>
</div>
<div class="container mt-4">
	<div class="alert alert-info d-flex align-items-center" role="alert">
		<svg class="bi flex-shrink-0 me-2" width="24" height="24" fill="currentColor" viewBox="0 0 512 512"><path d="M446.17 97.44c-44.92-44.59-118.08-44.59-163 0l-27.17 27-27.17-27c-44.92-44.59-118.08-44.59-163 0a113.64 113.64 0 000 161.8C78.44 271.8 250 442 256 448c5.5-5.59 178.05-176.63 190.17-188.76a113.64 113.64 0 000-161.8zm-22.65 139.61L256 403.32 88.48 237.05a82.19 82.19 0 01-24.55-58.71c-.88-44.63 38.67-83.82 83.4-82.85 43.65-4.1 80.52 47.92 108.67 73.6 28.4-25.79 64.84-77.59 108.67-73.6 72.45-1.87 111.72 91.66 58.85 141.56z"/></svg>
		<div>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–æ–Ω—É—Å –ø–æ–∏–Ω—Ç–æ–≤ —É–∫–∞–∑–∞–Ω–æ –≤ –¥–≤—É—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö: –±–µ–∑ VIP —Å—Ç–∞—Ç—É—Å–∞, —Å Gold –∏–ª–∏ Platinum VIP.</div>
	</div>

	<div class="table-responsive">
		<table class="table table-bordered table-hover align-middle">
			<thead class="table-dark">
				<tr>
					<th class="d-none d-sm-table-cell">–¢–∏–ø</th>
					<th>
						–î–µ–π—Å—Ç–≤–∏–µ
						<button id="show-hidden" class="btn btn-sm btn-outline-light show-button p-0 px-1 ms-2">
						üëÅ –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ
						</button>
					</th>
					<th colspan="2">–ë–µ–∑ / —Å VIP</th>
					<th class="text-center">
						<input type="checkbox" disabled checked class="form-check-input opacity-50">
					</th>
				</tr>
			</thead>
			<tbody id="data-table">
				<noscript>
					<tr><td colspan="5" class="text-center text-danger">–î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–∫–ª—é—á–∏—Ç—å JavaScript</td></tr>
				</noscript>
			</tbody>
			<tfoot>
				<tr id="bp-summary">
					<td class="d-none d-sm-table-cell"></td>
					<td class="text-end fw-bold">–ò—Ç–æ–≥–æ:</td>
					<td id="sum-novip">0 BP</td>
					<td id="sum-vip">0 BP</td>
					<td class="text-center">
						<button id="reset-checks" class="btn btn-sm">
							‚Ü∫
						</button>
					</td>
				</tr>
			</tfoot>
		</table>
	</div>
	<footer class="text-center text-secondary mb-3 small">
		–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö ‚Äî <a href="https://gta5rp.info/wiki/bonus-pointy/" class="text-decoration-none" target="_blank">GTA5RP.INFO</a>. –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞ <strong>d1KdaT</strong>
	</footer>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
	const data = [
		['–û–¥–∏–Ω–æ—á–Ω—ã–µ', '–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å –ö–∏–Ω–æ—Å—Ç—É–¥–∏—é (—Å –Ω–∞–ª–∏—á–∏–µ–º VIP –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å–∫–∏–¥–∫–∞)', 2, 4],
		['–û–¥–∏–Ω–æ—á–Ω—ã–µ', '–í—ã–ø–æ–ª–Ω–∏—Ç—å 1 —É—Å–ø–µ—à–Ω—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –≤ —Ç–∏—Ä–µ', 1, 2],
		['–û–¥–∏–Ω–æ—á–Ω—ã–µ', '–í—ã–∏–≥—Ä–∞—Ç—å –≤ –∫–∞–∑–∏–Ω–æ, –ø–æ—Å—Ç–∞–≤–∏–≤ –Ω–∞ 0 –∏–ª–∏ 00', 2, 4],
		['–û–¥–∏–Ω–æ—á–Ω—ã–µ', '–ü—Ä–æ–≤–µ—Å—Ç–∏ 3 —á–∞—Å–∞ –≤ –∏–≥—Ä–µ', 2, 4],
		['–û–¥–∏–Ω–æ—á–Ω—ã–µ', '–í—ã–ø–æ–ª–Ω–∏—Ç—å 20 –ø–æ–¥—Ö–æ–¥–æ–≤ –Ω–∞ –ª—é–±–æ–º —Ç—Ä–µ–Ω–∞–∂—ë—Ä–µ –≤ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–º –∑–∞–ª–µ –∏–ª–∏ –Ω–∞ —Å–ø–æ—Ä—Ç–ø–ª–æ—â–∞–¥–∫–µ', 1, 2],
		['–û–¥–∏–Ω–æ—á–Ω—ã–µ', '–í—ã–ø–æ–ª–Ω–∏—Ç—å 20 –ø–æ–¥—Ö–æ–¥–æ–≤ –Ω–∞ –ª—é–±–æ–º —ç—Å–ø–∞–Ω–¥–µ—Ä–µ (–∑–∞–º–µ–Ω—è–µ—Ç —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –∑–∞–ª)', 1, 2],
		['–û–¥–∏–Ω–æ—á–Ω—ã–µ', '–ö—É–ø–∏—Ç—å 1 –ª–æ—Ç–µ—Ä–µ–π–Ω—ã–π –±–∏–ª–µ—Ç —á–µ—Ä–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω', 1, 2],
		['–û–¥–∏–Ω–æ—á–Ω—ã–µ', '2 —Ä–∞–∑–∞ —Å–º–µ–Ω–∏—Ç—å –≤–Ω–µ—à–Ω–æ—Å—Ç—å —É NPC –•–∏—Ä—É—Ä–≥–∞ –≤ –≥–æ—Ä–æ–¥—Å–∫–æ–π EMS', 2, 4],
		['–û–¥–∏–Ω–æ—á–Ω—ã–µ', '–î–æ–±–∞–≤–∏—Ç—å 5 –≤–∏–¥–µ–æ –≤ –ö–∏–Ω–æ—Ç–µ–∞—Ç—Ä (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å 1 —Ä–æ–ª–∏–∫ 5 —Ä–∞–∑)', 1, 2],

		['–ü–∞—Ä–Ω—ã–µ', '–í—ã–∏–≥—Ä–∞—Ç—å 1 –≥–æ–Ω–∫—É –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–≥–µ', 1, 2],
		['–ü–∞—Ä–Ω—ã–µ', '–ü—Ä–æ–µ—Ö–∞—Ç—å 1 —É–ª–∏—á–Ω—É—é –≥–æ–Ω–∫—É, —Å–æ–∑–¥–∞–Ω–Ω—É—é —á–µ—Ä–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω —Å–æ —Å—Ç–∞–≤–∫–æ–π –æ—Ç 1000$ (—Å 5-–≥–æ —É—Ä–æ–≤–Ω—è)', 1, 2],
		['–ü–∞—Ä–Ω—ã–µ', '–ü–æ–±–µ–¥–∏—Ç—å 3 —Ä–∞–∑–∞ –≤ Dance Battle –≤ –ª—é–±–æ–º –∏–∑ –Ω–æ—á–Ω—ã—Ö –∫–ª—É–±–æ–≤', 2, 4],
		['–ü–∞—Ä–Ω—ã–µ', '–í—ã–∏–≥—Ä–∞—Ç—å 3 –∏–≥—Ä—ã –Ω–∞ –ê—Ä–µ–Ω–µ Maze Bank —Å–æ —Å—Ç–∞–≤–∫–æ–π –æ—Ç 100$', 1, 2],
		['–ü–∞—Ä–Ω—ã–µ', '–í—ã–∏–≥—Ä–∞—Ç—å 5 –∏–≥—Ä –≤ –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–æ–º –∫–æ–º–ø–ª–µ–∫—Å–µ (–¢–ö) —Å–æ —Å—Ç–∞–≤–∫–æ–π –æ—Ç 100$', 1, 2],

		['–•–æ–±–±–∏', '–°–Ω—è—Ç—å 5 —à–∫—É—Ä –ø—Ä–æ—á–Ω–æ—Å—Ç—å—é 100% (–Ω–∞–¥–æ —É–±–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ —Å 1 –≤—ã—Å—Ç—Ä–µ–ª–∞)', 2, 4],
		['–•–æ–±–±–∏', '–í—ã–∫–æ–ø–∞—Ç—å 1 —Å–æ–∫—Ä–æ–≤–∏—â–µ (–Ω–µ —Ö–ª–∞–º)', 1, 2],

		['–†–∞–±–æ—Ç–∞', '–í—ã–ø–æ–ª–Ω–∏—Ç—å 25 –¥–µ–π—Å—Ç–≤–∏–π –≤ –ø–æ—Ä—Ç—É', 2, 4],
		['–†–∞–±–æ—Ç–∞', '–í—ã–ø–æ–ª–Ω–∏—Ç—å 25 –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ —à–∞—Ö—Ç–µ', 2, 4],
		['–†–∞–±–æ—Ç–∞', '–í—ã–ø–æ–ª–Ω–∏—Ç—å 25 –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ —Å—Ç—Ä–æ–π–∫–µ', 2, 4],
		['–†–∞–±–æ—Ç–∞', '–ü–æ—Ç—É—à–∏—Ç—å 25 –æ–≥–æ–Ω—å–∫–æ–≤, —Ä–∞–±–æ—Ç–∞—è –ø–æ–∂–∞—Ä–Ω—ã–º', 1, 2],
		['–†–∞–±–æ—Ç–∞', '–î–æ—Å—Ç–∞–≤–∏—Ç—å 10 –ø–æ—Å—ã–ª–æ–∫, —Ä–∞–±–æ—Ç–∞—è –ø–æ—á—Ç–∞–ª—å–æ–Ω–æ–º', 1, 2],
		['–†–∞–±–æ—Ç–∞', '–í—ã–ø–æ–ª–Ω–∏—Ç—å 10 –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ —Ñ–µ—Ä–º–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥–æ–∏—Ç—å –∫–æ—Ä–æ–≤—É)', 1, 2],
		['–†–∞–±–æ—Ç–∞', '–í—ã–ø–æ–ª–Ω–∏—Ç—å 15 —Ä–µ–π—Å–æ–≤ –≤ –ø–æ—Ä—Ç –∏–∑ –ª—é–±–æ–π —Ç–æ—á–∫–∏, —Ä–∞–±–æ—Ç–∞—è –¥–∞–ª—å–Ω–æ–±–æ–π—â–∏–∫–æ–º', 2, 4],
		['–†–∞–±–æ—Ç–∞', '–í—ã–ø–æ–ª–Ω–∏—Ç—å 2 —Ä–µ–π—Å–∞ –Ω–∞ –ª—é–±–æ–º –º–∞—Ä—à—Ä—É—Ç–µ, —Ä–∞–±–æ—Ç–∞—è –≤–æ–¥–∏—Ç–µ–ª–µ–º –∞–≤—Ç–æ–±—É—Å–∞', 2, 4],

		['–ì–æ—Å.', '–í—ã–¥–∞—Ç—å 5 –º–µ–¥–∫–∞—Ä—Ç, —Ä–∞–±–æ—Ç–∞—è –≤ EMS', 1, 2],
		['–ì–æ—Å.', '–ó–∞–∫—Ä—ã—Ç—å 15 –≤—ã–∑–æ–≤–æ–≤, —Ä–∞–±–æ—Ç–∞—è –≤ EMS', 2, 4],
		['–ì–æ—Å.', '–ü—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ 1 –∞—Ä–µ—Å—Ç –≤ –ö–ü–ó LSPD/LSSD', 1, 2],
		['–ì–æ—Å.', '–ü–æ—Å—Ç–∞–≤–∏—Ç—å 2 —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ —É—á—ë—Ç, —Ä–∞–±–æ—Ç–∞—è –≤ LSPD', 1, 2],
		['–ì–æ—Å.', '–ó–∞–∫—Ä—ã—Ç—å 5 –≤—ã–∑–æ–≤–æ–≤, —Ä–∞–±–æ—Ç–∞—è –≤ –≥–æ—Å. (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ö–æ–¥-0)', 2, 4],
		['–ì–æ—Å.', '–í—ã–ø—É—Å—Ç–∏—Ç—å 2-—Ö –∑–∞–∫–ª—é—á—ë–Ω–Ω—ã—Ö –ø–æ–¥ –∑–∞–ª–æ–≥ –∏–∑ –ö–ü–ó LSPD/LSSD, —Ä–∞–±–æ—Ç–∞—è –∞–¥–≤–æ–∫–∞—Ç–æ–º', 2, 4],
		['–ì–æ—Å.', '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å 40 –æ–±—ä—è–≤–ª–µ–Ω–∏–π, —Ä–∞–±–æ—Ç–∞—è –≤ Weazel News', 2, 4],
		['–ì–æ—Å.', '–û—Ç–ø—Ä–∞–≤–∏—Ç—å 1 —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≠—Ñ–∏—Ä (–∑–µ–ª—ë–Ω–∞—è —Å—Ç—Ä–æ–∫–∞), —Ä–∞–±–æ—Ç–∞—è –≤ Weazel News', 2, 4],

		['Crime', '–ü–æ—É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –∫–∞–ø—Ç–µ (–±–∞–Ω–¥–∞) –∏–ª–∏ –±–∏–∑–≤–∞—Ä–µ (–º–∞—Ñ–∏—è)', 1, 2],
		['Crime', '–ü—Ä–∏–≤–µ–∑—Ç–∏ –Ω–∞ —Ç–∏—Ç—É–ª –•–∞–º–º–µ—Ä —Å –í–ó–•', 3, 6],
		['Crime', '5 —Ä–∞–∑ –ø–æ–ª—É—á–∏—Ç—å –æ–ø–ª–∞—Ç—É –∑–∞ –¥–æ—Å—Ç–∞–≤–∫—É –∫–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥—ã –≤ –º–∞—Ñ–∏–∏', 2, 4],
		['Crime', '–í–∑–ª–æ–º–∞—Ç—å 15 –∑–∞–º–∫–æ–≤ –Ω–∞ –æ–≥—Ä–∞–±–ª–µ–Ω–∏—è—Ö –¥–æ–º–æ–≤ –∏/–∏–ª–∏ —É–≥–æ–Ω–∞—Ö –∞–≤—Ç–æ', 2, 4],
		['Crime', '–ó–∞–∫—Ä–∞—Å–∏—Ç—å 7 –≥—Ä–∞—Ñ—Ñ–∏—Ç–∏, –Ω–∞—Ö–æ–¥—è—Å—å –≤ –±–∞–Ω–¥–µ (–º–æ–∂–Ω–æ –∑–∞–∫—Ä–∞—Å–∏—Ç—å –æ–¥–Ω–æ –≥—Ä–∞—Ñ—Ñ–∏—Ç–∏ 7 —Ä–∞–∑)', 1, 2],

		['–ë–∏–∑–Ω–µ—Å', '–í—Ä—É—á–Ω—É—é –∑–∞–∫–∞–∑–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–∞ —Å–∫–ª–∞–¥ –±–∏–∑–Ω–µ—Å–∞ (–Ω–∞–∂–∞—Ç—å –≤—ã–∫–ª./–≤–∫–ª.)', 1, 2],
	];

	const html = document.documentElement;
	const body = document.body;
	const themeButton = document.getElementById('toggle-theme');

	const tableBody = document.getElementById('data-table');
	const storageKey = 'bp-checks';
	const hiddenKey = 'bp-hidden';

	let checked = JSON.parse(localStorage.getItem(storageKey) || '{}');
	let hidden = JSON.parse(localStorage.getItem(hiddenKey) || '[]');

	function renderTable() {
		tableBody.innerHTML = '';

		data.forEach((row, index) => {
			const id = index + 1;
			const isHidden = hidden.includes(id);

			const tr = document.createElement('tr');
			tr.dataset.id = id;
			if (isHidden) tr.style.display = 'none';

			const tdType = document.createElement('td');
			tdType.className = 'd-none d-sm-table-cell';
			tdType.textContent = row[0];
			tr.appendChild(tdType);

			const tdAction = document.createElement('td');
			tdAction.innerHTML = `${row[1]} <button class="btn btn-sm hide-row p-0 hide-button" data-id="${id}" title="–°–∫—Ä—ã—Ç—å">üëÅÔ∏è‚Äçüó®Ô∏è</button>`;
			tr.appendChild(tdAction);

			const tdNoVip = document.createElement('td');
			tdNoVip.textContent = `${row[2]} BP`;
			tr.appendChild(tdNoVip);

			const tdVip = document.createElement('td');
			tdVip.textContent = `${row[3]} BP`;
			tr.appendChild(tdVip);

			const tdCheck = document.createElement('td');
			tdCheck.className = 'check-cell text-center';
			tdCheck.innerHTML = `<input type="checkbox" class="form-check-input bp-check" data-id="${id}" ${checked[id] ? 'checked' : ''}>`;
			tr.appendChild(tdCheck);

			tableBody.appendChild(tr);
		});

		attachEvents();
	}

	function attachEvents() {
		document.querySelectorAll('.bp-check').forEach(el => {
			el.addEventListener('change', function () {
				const id = this.dataset.id;
				if (this.checked) {
					checked[id] = { time: Math.floor(Date.now() / 1000) };
				} else {
					delete checked[id];
				}
				localStorage.setItem(storageKey, JSON.stringify(checked));
				updateSummary();
			});
		});

		document.querySelectorAll('.check-cell').forEach(cell => {
			cell.addEventListener('click', function (e) {
				if (e.target.tagName === 'INPUT') return;
				const checkbox = cell.querySelector('.bp-check');
				checkbox.checked = !checkbox.checked;
				checkbox.dispatchEvent(new Event('change'));
			});
		});

		document.querySelectorAll('.hide-row').forEach(btn => {
			btn.addEventListener('click', function (e) {
				e.stopPropagation();
				const id = parseInt(this.dataset.id);
				if (!hidden.includes(id)) {
					hidden.push(id);
					localStorage.setItem(hiddenKey, JSON.stringify(hidden));
				}
				document.querySelector(`tr[data-id="${id}"]`).style.display = 'none';
			});
		});

		document.getElementById('show-hidden').addEventListener('click', () => {
			localStorage.removeItem(hiddenKey);
			document.querySelectorAll('tbody tr').forEach(row => row.style.display = '');
		});

		document.getElementById('reset-checks').addEventListener('click', () => {
			if (confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –æ—Ç–º–µ—Ç–∫–∏?')) {
				localStorage.setItem(storageKey, '{}');

				document.querySelectorAll('.bp-check').forEach(cb => {
					cb.checked = false;
				});

				updateSummary();
			}
		});

		themeButton.addEventListener('click', () => {
			const current = html.getAttribute('data-bs-theme');
			const newTheme = current === 'dark' ? 'light' : 'dark';
			applyTheme(newTheme);
			localStorage.setItem('bp-theme', newTheme);
		});
	}

	function updateSummary() {
		let sumNoVip = 0;
		let sumVip = 0;

		document.querySelectorAll('.bp-check:checked').forEach(cb => {
			const id = parseInt(cb.dataset.id);
			const entry = data[id - 1];
			if (entry) {
				sumNoVip += entry[2];
				sumVip += entry[3];
			}
		});

		document.getElementById('sum-novip').textContent = `${sumNoVip} BP`;
		document.getElementById('sum-vip').textContent = `${sumVip} BP`;
	}

	function getLogicalDayFromTimestamp(ts) {
		const mod = ts % 86400;
		const shift = (mod <= 14460) ? -1 : 0;
		return Math.floor(ts / 86400) + shift;
	}

	function getCurrentLogicalDay() {
		const now = Math.floor(Date.now() / 1000);
		return getLogicalDayFromTimestamp(now);
	}

	const logicalToday = getCurrentLogicalDay();
	for (let id in checked) {
		const saved = checked[id];
		if (!saved?.time) continue;

		const savedDay = getLogicalDayFromTimestamp(saved.time);
		if (savedDay !== logicalToday) {
			delete checked[id];
		}
	}
	localStorage.setItem(storageKey, JSON.stringify(checked));

	function getSystemTheme() {
		return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
	}

	function applyTheme(theme) {
		html.setAttribute('data-bs-theme', theme);
		body.classList.toggle('bg-light', theme === 'light');
	}

	const savedTheme = localStorage.getItem('bp-theme');
	const initialTheme = savedTheme || getSystemTheme();
	applyTheme(initialTheme);

	renderTable();
	updateSummary();
});
</script>

</body>
</html>
